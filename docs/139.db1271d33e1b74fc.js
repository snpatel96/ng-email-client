"use strict";(self.webpackChunkemail_client=self.webpackChunkemail_client||[]).push([[139],{7139:(q,x,l)=>{l.r(x),l.d(x,{InboxModule:()=>f});var Z=l(6895),r=l(8085),e=l(8256),E=l(529);class s{constructor(t){this.http=t,this.rootUrl="https://api.angular-email.com"}getEmails(){return this.http.get(`${this.rootUrl}/emails`)}getEmail(t){return this.http.get(`${this.rootUrl}/emails/${t}`)}sendEmail(t){return this.http.post(`${this.rootUrl}/emails`,t)}}s.\u0275fac=function(t){return new(t||s)(e.LFG(E.eN))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"});const w=[[["","modalTitle",""]],"*",[["","modalFooter",""]]];class c{constructor(t){this.el=t,this.dismiss=new e.vpe}ngOnInit(){document.body.appendChild(this.el.nativeElement)}ngOnDestroy(){this.el.nativeElement.remove()}onDismissClick(){this.dismiss.emit()}}c.\u0275fac=function(t){return new(t||c)(e.Y36(e.SBq))},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-modal"]],outputs:{dismiss:"dismiss"},ngContentSelectors:["[modalTitle]","*","[modalFooter]"],decls:12,vars:0,consts:[[1,"ui","dimmer","visible","active",3,"click"],[1,"ui","modal","visible","active",3,"click"],[1,"close","icon",3,"click"],[1,"header"],[1,"content"],[1,"actions","actions-default"],[1,"ui","button","primary",3,"click"],[1,"actions"]],template:function(t,i){1&t&&(e.F$t(w),e.TgZ(0,"div",0),e.NdJ("click",function(){return i.onDismissClick()}),e.TgZ(1,"div",1),e.NdJ("click",function(m){return m.stopPropagation()}),e.TgZ(2,"i",2),e.NdJ("click",function(){return i.onDismissClick()}),e.qZA(),e.TgZ(3,"div",3),e.Hsn(4),e.qZA(),e.TgZ(5,"div",4),e.Hsn(6,1),e.qZA(),e.TgZ(7,"div",5)(8,"button",6),e.NdJ("click",function(){return i.onDismissClick()}),e._uU(9,"Ok"),e.qZA()(),e.TgZ(10,"div",7),e.Hsn(11,2),e.qZA()()())},styles:[".action[_ngcontent-%COMP%]:empty{display:none}.actions-default[_ngcontent-%COMP%]{display:none}.action[_ngcontent-%COMP%]:empty + .actions-default[_ngcontent-%COMP%]{display:block}"]});var a=l(433),S=l(235);class p{constructor(){this.emailSubmit=new e.vpe}ngOnInit(){const{subject:t,from:i,to:o,text:m}=this.email;this.emailForm=new a.cw({to:new a.NI(o,[a.kI.required,a.kI.email]),from:new a.NI({value:i,disabled:!0}),subject:new a.NI(t,[a.kI.required]),text:new a.NI(m,[a.kI.required])})}onSubmit(){this.emailForm.invalid||this.emailSubmit.emit(this.emailForm.value)}}function M(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"app-modal",2),e.NdJ("dismiss",function(){e.CHM(i);const m=e.oxw();return e.KtG(m.showModal=!1)}),e.TgZ(1,"div",3),e._uU(2,"Reply"),e.qZA(),e.TgZ(3,"app-email-form",4),e.NdJ("emailSubmit",function(m){e.CHM(i);const b=e.oxw();return e.KtG(b.onSubmit(m))}),e.qZA()()}if(2&n){const i=e.oxw();e.xp6(3),e.Q6J("email",i.email)}}p.\u0275fac=function(t){return new(t||p)},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-email-form"]],inputs:{email:"email"},outputs:{emailSubmit:"emailSubmit"},decls:7,vars:5,consts:[[1,"ui","form",3,"formGroup","ngSubmit"],["label","To","inputType","email",3,"control"],["label","From","inputType","email",3,"control"],["label","Subject","inputType","text",3,"control"],["controlType","textarea","label","Content",3,"control"],[1,"ui","button","primary"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e._UZ(1,"app-input",1)(2,"app-input",2)(3,"app-input",3)(4,"app-input",4),e.TgZ(5,"button",5),e._uU(6,"Send"),e.qZA()()),2&t&&(e.Q6J("formGroup",i.emailForm),e.xp6(1),e.Q6J("control",i.emailForm.get("to")),e.xp6(1),e.Q6J("control",i.emailForm.get("from")),e.xp6(1),e.Q6J("control",i.emailForm.get("subject")),e.xp6(1),e.Q6J("control",i.emailForm.get("text")))},dependencies:[S.a,a._Y,a.JL,a.sg]});class h{constructor(t){this.emailService=t,this.showModal=!1}ngOnChanges(){const t=this.email.text.replace(/\n/gi,"\n>");this.email={...this.email,from:this.email.to,to:this.email.from,subject:`Re: ${this.email.subject}`,text:`\n\n\n-----${this.email.from} wrote:\n${t}`}}onSubmit(t){this.emailService.sendEmail(t).subscribe(()=>{this.showModal=!1})}}h.\u0275fac=function(t){return new(t||h)(e.Y36(s))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-email-reply"]],inputs:{email:"email"},features:[e.TTD],decls:3,vars:1,consts:[[1,"ui","button","primary",3,"click"],[3,"dismiss",4,"ngIf"],[3,"dismiss"],["modalTitle",""],[3,"email","emailSubmit"]],template:function(t,i){1&t&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return i.showModal=!0}),e._uU(1,"Reply"),e.qZA(),e.YNc(2,M,4,1,"app-modal",1)),2&t&&(e.xp6(2),e.Q6J("ngIf",i.showModal))},dependencies:[Z.O5,c,p]});class _{constructor(t){this.route=t,this.email=t.snapshot.data.email,this.route.data.subscribe(({email:i})=>this.email=i)}ngOnInit(){}}_.\u0275fac=function(t){return new(t||_)(e.Y36(r.gz))},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-email-show"]],decls:16,vars:5,consts:[[1,"header"],[3,"email"],[1,"ui","divider"],[3,"innerHTML"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div")(2,"h3"),e._uU(3),e.qZA(),e.TgZ(4,"div"),e._uU(5," From: "),e.TgZ(6,"i"),e._uU(7),e.qZA()(),e.TgZ(8,"div"),e._uU(9," To: "),e.TgZ(10,"i"),e._uU(11),e.qZA()()(),e.TgZ(12,"div"),e._UZ(13,"app-email-reply",1),e.qZA()(),e._UZ(14,"div",2)(15,"div",3)),2&t&&(e.xp6(3),e.Oqu(i.email.subject),e.xp6(4),e.Oqu(i.email.from),e.xp6(4),e.Oqu(i.email.to),e.xp6(2),e.Q6J("email",i.email),e.xp6(2),e.Q6J("innerHTML",i.email.html,e.oJD))},dependencies:[h],styles:[".header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap}"]});var O=l(384);function J(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"app-modal",2),e.NdJ("dismiss",function(){e.CHM(i);const m=e.oxw();return e.KtG(m.showModal=!1)}),e.TgZ(1,"h3",3),e._uU(2,"Compose"),e.qZA(),e.TgZ(3,"app-email-form",4),e.NdJ("emailSubmit",function(m){e.CHM(i);const b=e.oxw();return e.KtG(b.onEmailSubmit(m))}),e.qZA()()}if(2&n){const i=e.oxw();e.xp6(3),e.Q6J("email",i.email)}}class v{constructor(t,i){this.authService=t,this.emailService=i,this.showModal=!1,this.email={id:"",to:"",subject:"",html:"",text:"",from:`${t.username}@angular-email.com`}}onEmailSubmit(t){this.emailService.sendEmail(t).subscribe(()=>{this.showModal=!1})}}function U(n,t){if(1&n&&(e.TgZ(0,"div",2)(1,"a",3)(2,"div",4)(3,"div",5),e._uU(4),e.qZA(),e.TgZ(5,"p",6),e._uU(6),e.qZA()()()()),2&n){const i=t.$implicit;e.xp6(1),e.Q6J("routerLink",i.id),e.xp6(3),e.Oqu(i.subject),e.xp6(2),e.Oqu(i.from)}}v.\u0275fac=function(t){return new(t||v)(e.Y36(O.e),e.Y36(s))},v.\u0275cmp=e.Xpm({type:v,selectors:[["app-email-create"]],decls:3,vars:1,consts:[[1,"ui","button","primary","fluid","inverted",3,"click"],[3,"dismiss",4,"ngIf"],[3,"dismiss"],["modalTitle",""],[3,"email","emailSubmit"]],template:function(t,i){1&t&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return i.showModal=!0}),e._uU(1," Compose\n"),e.qZA(),e.YNc(2,J,4,1,"app-modal",1)),2&t&&(e.xp6(2),e.Q6J("ngIf",i.showModal))},dependencies:[Z.O5,c,p],styles:[".ui.button.primary[_ngcontent-%COMP%]{margin-bottom:1rem}"]});class g{constructor(t){this.emailService=t,this.emails=[]}ngOnInit(){this.emailService.getEmails().subscribe(t=>{this.emails=t})}}g.\u0275fac=function(t){return new(t||g)(e.Y36(s))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-email-index"]],decls:2,vars:1,consts:[[1,"ui","celled","list"],["class","item",4,"ngFor","ngForOf"],[1,"item"],["routerLinkActive","active",3,"routerLink"],[1,"content"],[1,"header","trim"],[1,"trim"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,U,7,3,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",i.emails))},dependencies:[Z.sg,r.rH,r.Od],styles:['.item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000}a.active[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center}a.active[_ngcontent-%COMP%]:before{content:">";font-size:20px;margin-right:10px}.content[_ngcontent-%COMP%]{width:90%}.trim[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:100%}']});class C{}C.\u0275fac=function(t){return new(t||C)},C.\u0275cmp=e.Xpm({type:C,selectors:[["app-home"]],decls:6,vars:0,consts:[[1,"ui","grid","stackable"],[1,"five","wide","column"],[1,"eleven","wide","column"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"app-email-create")(3,"app-email-index"),e.qZA(),e.TgZ(4,"div",2),e._UZ(5,"router-outlet"),e.qZA()())},dependencies:[r.lC,v,g]});class T{}T.\u0275fac=function(t){return new(t||T)},T.\u0275cmp=e.Xpm({type:T,selectors:[["app-placeholder"]],decls:4,vars:0,consts:[[1,"ui","placeholder","segment"],[1,"ui","icon","header"],[1,"envelope","outline","icon"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"i",2),e._uU(3," Select an Email to get Started "),e.qZA()())}});var k=l(515),I=l(262);class u{constructor(t,i){this.emailService=t,this.router=i}resolve(t,i){const{id:o}=t.params;return this.emailService.getEmail(o).pipe((0,I.K)(m=>(this.router.navigateByUrl("/inbox/not-found"),k.E)))}}u.\u0275fac=function(t){return new(t||u)(e.LFG(s),e.LFG(r.F0))},u.\u0275prov=e.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"});class y{}y.\u0275fac=function(t){return new(t||y)},y.\u0275cmp=e.Xpm({type:y,selectors:[["app-not-found"]],decls:4,vars:0,consts:[[1,"ui","placeholder","segment"],[1,"ui","icon","header"],[1,"search","icon"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"i",2),e._uU(3," Email not found "),e.qZA()())}});const A=[{path:"",component:C,children:[{path:"not-found",component:y},{path:":id",component:_,resolve:{email:u}},{path:"",component:T}]}];class d{}d.\u0275fac=function(t){return new(t||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({imports:[r.Bz.forChild(A),r.Bz]});var N=l(4466);class f{}f.\u0275fac=function(t){return new(t||f)},f.\u0275mod=e.oAB({type:f}),f.\u0275inj=e.cJS({imports:[Z.ez,d,N.m,a.UX]})}}]);